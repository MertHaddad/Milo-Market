"use strict";(self.webpackChunkmarket=self.webpackChunkmarket||[]).push([[413],{5413:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(2791),a=r(2982),l=r(885),s=r(9434),c=r(7882),u=r(9312),i=r(8182),o=r(8710),d=r(567),f=r(4526),m=r(184),h=function(){var e=(0,n.useState)(""),t=(0,l.Z)(e,2),r=t[0],h=t[1],g=(0,n.useState)([]),v=(0,l.Z)(g,2),b=v[0],x=v[1],p=(0,n.useState)(["All"]),j=(0,l.Z)(p,2),y=j[0],N=j[1],k=(0,s.v9)((function(e){return e.query.value})),Z=(0,s.v9)((function(e){return e.allProducts.stockByBrand})),A=(0,s.v9)((function(e){return e.filteredProducts})),C=(0,n.useState)(!1),S=(0,l.Z)(C,2),w=S[0],P=S[1],L=(0,s.I0)(),I=(0,n.useTransition)(),F=(0,l.Z)(I,2),_=(F[0],F[1]);(0,d.Z)((function(){var e=Z.filter((function(e){return e.brand.name.toLocaleLowerCase().includes(r.toLocaleLowerCase())}));x(e)}),[r]);var q=function(e){P(!0),_((function(){if("All"===e.target.name)N(y.includes("All")?y.filter((function(e){return"All"!==e})):["All"]);else{var t=y;y.includes("All")&&(t=y.filter((function(e){return"All"!==e}))),N(t.includes(e.target.id)?t.filter((function(t){return t!==e.target.id})):[].concat((0,a.Z)(t),[e.target.id]))}var r="manufacturer=".concat("All"===e.target.id?"uncheck-brands":e.target.id);L((0,c._L)(r))}))};return(0,d.Z)((function(){"fulfilled"===A.status&&(console.log("tags should update"),L((0,i.K9)({query:k,selected:y,filteredProductsNum:A.currentProductNumber})),P(!1))}),[A]),(0,d.Z)((function(){L((0,u.kk)(k)),L((0,o.$5)())}),[y]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("input",{onChange:function(e){return h(e.target.value)},value:r,type:"text",placeholder:"Search brand",className:"search-bar"}),(0,m.jsx)("span",{className:"float-spinner",children:w?(0,m.jsx)(f.Z,{}):null}),(0,m.jsx)("div",{className:"filter-body custom-scrollbar",children:(0,m.jsx)(m.Fragment,{children:Z.length?(b.length?b:Z).map((function(e,t){return e.products?(0,m.jsxs)("div",{className:"form-group filter-item",children:[(0,m.jsx)("input",{onChange:q,type:"checkbox",name:e.brand.name,"data-testid":"test-brand-filter-checkbox",id:e.brand.slug,defaultChecked:y.includes(e.brand.slug)||y.includes(e.brand.name)},y),(0,m.jsxs)("label",{className:"filtering-label text-secondary",htmlFor:e.brand.slug,children:[e.brand.name,(0,m.jsxs)("span",{className:"text-dark-gray",children:[" ","(",e.products,")"]})]})]},t):null})):(0,m.jsx)(f.Z,{})})})]})},g=function(){var e=(0,n.useState)(""),t=(0,l.Z)(e,2),r=t[0],h=t[1],g=(0,n.useState)([]),v=(0,l.Z)(g,2),b=v[0],x=v[1],p=(0,n.useState)(["All"]),j=(0,l.Z)(p,2),y=j[0],N=j[1],k=(0,s.v9)((function(e){return e.query.value})),Z=(0,s.v9)((function(e){return e.allProducts.stockByTag})),A=(0,s.v9)((function(e){return e.brand.value})),C=(0,s.v9)((function(e){return e.filteredProducts})),S=(0,s.I0)(),w=function(e){if("All"===e.target.id)N(y.includes("All")?y.filter((function(e){return"All"!==e})):["All"]);else{var t=y;y.includes("All")&&(t=y.filter((function(e){return"All"!==e}))),N(t.includes(e.target.id)?t.filter((function(t){return t!==e.target.id})):[].concat((0,a.Z)(t),[e.target.id]))}var r="tags_like=(?<!\\s)\\b".concat(e.target.id,"\\b(?!\\s)");S((0,c._L)(r))};return(0,d.Z)((function(){"fulfilled"===C.status&&(console.log("Brands should update"),S((0,i.n0)({query:k,brands:A,selected:y,filteredProductsNum:C.currentProductNumber})))}),[C]),(0,d.Z)((function(){S((0,u.kk)(k)),S((0,o.$5)())}),[y]),(0,d.Z)((function(){var e=Z.filter((function(e){return e.tag.toLocaleLowerCase().includes(r.toLocaleLowerCase())}));x(e)}),[r]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("input",{onChange:function(e){return h(e.target.value)},value:r,type:"text",placeholder:"Search tag",className:"search-bar"}),(0,m.jsx)("div",{className:"filter-body custom-scrollbar",children:Z.length?(b.length?b:Z).map((function(e,t){return e.products?(0,m.jsxs)("div",{className:"form-group filter-item",children:[(0,m.jsx)("input",{onChange:w,type:"checkbox",className:"custom-checkbox",name:"",id:e.tag,defaultChecked:y.includes(e.tag)},y),(0,m.jsxs)("label",{className:"filtering-label text-secondary",htmlFor:e.tag,children:[e.tag," ",(0,m.jsxs)("span",{className:"text-dark-gray ",children:["(",e.products,")"]})]})]},t):null})):(0,m.jsx)(f.Z,{})})]})},v=function(){var e=(0,n.useState)(""),t=(0,l.Z)(e,2),r=t[0],a=t[1],i=(0,s.I0)(),d=(0,s.v9)((function(e){return e.query.value})),f=function(e){a(r===e.target.id?"":e.target.id);var t="_sort=".concat(/price/.test(e.target.id)?"price":"added","&_order=").concat(/Asc/.test(e.target.id)?"asc":"desc");i((0,c._L)(t)),i((0,u.kk)(d)),i((0,o.$5)())};return(0,m.jsx)(m.Fragment,{children:[{testId:"sort-radio",name:"priceAsc",label:"Price low to high"},{testId:"sort-radio",name:"priceDesc",label:"Price high to low"},{testId:"sort-radio",name:"dateDesc",label:"New to old"},{testId:"sort-radio",name:"dateAsc",label:"Old to new"}].map((function(e,t){return(0,m.jsxs)("div",{className:"filter-item",children:[(0,m.jsx)("input",{defaultChecked:e.name===r,onClick:f,id:e.name,type:"radio","data-testid":"test-sort-radio",value:e.name,className:"custom-radio",name:"sort-radio"}),(0,m.jsx)("label",{className:"sorting-label text-secondary",htmlFor:e.name,children:e.label})]},t)}))})},b=r(9499),x=function(){var e=(0,s.I0)(),t=(0,s.v9)((function(e){return e.brand})),r=(0,s.v9)((function(e){return e.allProducts}));return(0,n.useEffect)((function(){e((0,i.Nx)()),e((0,b.vp)()),e((0,o.$5)())}),[]),(0,d.Z)((function(){"fulfilled"===r.status&&(e((0,i.NJ)()),e((0,i.K9)({selected:[],filteredProductsNum:r.value.length})))}),[r.status]),(0,d.Z)((function(){"fulfilled"===t.status&&"fulfilled"===r.status&&e((0,i.n0)({brands:t.value,selected:[],filteredProductsNum:r.value.length}))}),[t.status,r.status]),(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"filters",children:[(0,m.jsx)("span",{className:"filters-title",children:"Sorting"}),(0,m.jsx)("div",{className:"filter-container",children:(0,m.jsx)(v,{})}),(0,m.jsx)("span",{className:"filters-title",children:"Brands"}),(0,m.jsx)("div",{className:"filter-container",children:(0,m.jsx)(h,{})}),(0,m.jsx)("span",{className:"filters-title",children:"Tags"}),(0,m.jsx)("div",{className:"filter-container",children:(0,m.jsx)(g,{})})]})})}},567:function(e,t,r){var n=r(2791),a=r(2007),l=r.n(a),s=function(e,t){var r=(0,n.useRef)(!1);(0,n.useEffect)((function(){r.current?e():r.current=!0}),t)};s.propTypes={func:l().func,dependacyArray:l().array},t.Z=s},885:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(181);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l=[],s=!0,c=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);s=!0);}catch(u){c=!0,a=u}finally{try{s||null==r.return||r.return()}finally{if(c)throw a}}return l}}(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=413.05523d03.chunk.js.map