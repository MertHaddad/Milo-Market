"use strict";(self.webpackChunkmarket=self.webpackChunkmarket||[]).push([[413],{5413:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(2791),a=r(3433),l=r(9439),s=r(9434),c=r(7882),i=r(9312),u=r(8182),d=r(8710),o=r(567),f=r(3306),m=r(184),h=function(){var e=(0,n.useState)(""),t=(0,l.Z)(e,2),r=t[0],h=t[1],g=(0,n.useState)([]),v=(0,l.Z)(g,2),b=v[0],x=v[1],j=(0,n.useState)(["All"]),p=(0,l.Z)(j,2),N=p[0],k=p[1],Z=(0,s.v9)((function(e){return e.query.value})),y=(0,s.v9)((function(e){return e.allProducts.stockByBrand})),A=(0,s.v9)((function(e){return e.filteredProducts})),C=(0,n.useState)(!1),P=(0,l.Z)(C,2),L=P[0],S=P[1],w=(0,s.v9)((function(e){return e.query.value})),F=(0,s.I0)(),I=(0,n.useTransition)(),_=(0,l.Z)(I,2),q=(_[0],_[1]);(0,o.Z)((function(){var e=y.filter((function(e){return e.brand.name.toLocaleLowerCase().includes(r.toLocaleLowerCase())}));x(e)}),[r]);var B=function(e){q((function(){if("All"===e.target.name)k(N.includes("All")?N.filter((function(e){return"All"!==e})):["All"]);else{var t=N;N.includes("All")&&(t=N.filter((function(e){return"All"!==e}))),k(t.includes(e.target.id)||w.includes("manufacturer="+e.target.id)?t.filter((function(t){return t!==e.target.id})):[].concat((0,a.Z)(t),[e.target.id]))}var r="manufacturer=".concat("All"===e.target.id?"uncheck-brands":e.target.id);F((0,c._L)(r))}))};return(0,o.Z)((function(){"fulfilled"===A.status&&(S(!0),F((0,u.K9)({query:Z,selected:N,filteredProductsNum:A.currentProductNumber})),S(!1))}),[]),(0,o.Z)((function(){F((0,i.kk)(Z)),F((0,d.$5)())}),[N]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("input",{onChange:function(e){return h(e.target.value)},value:r,type:"text",placeholder:"Search brand",className:"search-bar"}),(0,m.jsx)("span",{className:"float-spinner",children:L?(0,m.jsx)(f.Z,{}):null}),(0,m.jsx)("div",{className:"filter-body custom-scrollbar",children:(0,m.jsx)(m.Fragment,{children:y.length?(b.length?b:y).map((function(e,t){return e.products?(0,m.jsxs)("div",{className:"form-group filter-item",children:[(0,m.jsx)("input",{onChange:B,type:"checkbox",name:e.brand.name,"data-testid":"test-brand-filter-checkbox",id:e.brand.slug,defaultChecked:N.includes(e.brand.slug)||N.includes(e.brand.name)||w.includes("manufacturer="+e.brand.slug)},N),(0,m.jsxs)("label",{className:"filtering-label text-secondary",htmlFor:e.brand.slug,children:[e.brand.name,(0,m.jsxs)("span",{className:"text-dark-gray",children:[" ","(",e.products,")"]})]})]},t):null})):(0,m.jsx)(f.Z,{})})},w)]})},g=function(){var e=(0,n.useState)(""),t=(0,l.Z)(e,2),r=t[0],h=t[1],g=(0,n.useState)([]),v=(0,l.Z)(g,2),b=v[0],x=v[1],j=(0,n.useState)(["All"]),p=(0,l.Z)(j,2),N=p[0],k=p[1],Z=(0,s.v9)((function(e){return e.query.value})),y=(0,s.v9)((function(e){return e.allProducts.stockByTag})),A=(0,s.v9)((function(e){return e.allProducts.tags})),C=(0,s.v9)((function(e){return e.brand.value})),P=(0,s.v9)((function(e){return e.filteredProducts})),L=(0,s.v9)((function(e){return e.query.value})),S=(0,s.I0)(),w=function(e){if("All"===e.target.id)k(N.includes("All")?N.filter((function(e){return"All"!==e})):["All"]);else{var t=N;N.includes("All")&&(t=N.filter((function(e){return"All"!==e}))),k(t.includes(e.target.id)||L.includes("tags_like=(?<!\\s)\\b".concat(e.target.id,"\\b(?!\\s)"))?t.filter((function(t){return t!==e.target.id})):[].concat((0,a.Z)(t),[e.target.id]))}var r="tags_like=(?<!\\s)\\b".concat(e.target.id,"\\b(?!\\s)");S((0,c._L)(r))};return(0,o.Z)((function(){"fulfilled"===P.status&&S((0,u.n0)({query:Z,brands:C,selected:N,filteredProductsNum:P.currentProductNumber}))}),[P.currentProductNumber]),(0,o.Z)((function(){S((0,i.kk)(Z)),S((0,d.$5)())}),[N]),(0,o.Z)((function(){var e=y.filter((function(e){return e.tag.toLocaleLowerCase().includes(r.toLocaleLowerCase())}));x(e)}),[r]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("input",{onChange:function(e){return h(e.target.value)},value:r,type:"text",placeholder:"Search tag",className:"search-bar"}),(0,m.jsx)("div",{className:"filter-body custom-scrollbar",children:A.length?(b.length?b:A).map((function(e,t){return(0,m.jsxs)("div",{className:"form-group filter-item",children:[(0,m.jsx)("input",{onChange:w,type:"checkbox",className:"custom-checkbox",name:"",id:e,defaultChecked:N.includes(e)||L.includes("tags_like=(?<!\\s)\\b".concat(e,"\\b(?!\\s)"))},N),(0,m.jsxs)("label",{className:"filtering-label text-secondary",htmlFor:e,children:[e," "]})]},t)})):(0,m.jsx)(f.Z,{})},L)]})},v=function(){var e=(0,n.useState)(""),t=(0,l.Z)(e,2),r=t[0],a=t[1],u=(0,s.I0)(),o=(0,s.v9)((function(e){return e.query.value})),f=function(e){a(r===e.target.id?"":e.target.id);var t="_sort=".concat(/price/.test(e.target.id)?"price":"added","&_order=").concat(/Asc/.test(e.target.id)?"asc":"desc");u((0,c._L)(t)),u((0,i.kk)(o)),u((0,d.$5)())};return(0,m.jsx)(m.Fragment,{children:[{testId:"sort-radio",name:"priceAsc",label:"Price low to high"},{testId:"sort-radio",name:"priceDesc",label:"Price high to low"},{testId:"sort-radio",name:"dateDesc",label:"New to old"},{testId:"sort-radio",name:"dateAsc",label:"Old to new"}].map((function(e,t){return(0,m.jsxs)("div",{className:"filter-item",children:[(0,m.jsx)("input",{defaultChecked:e.name===r,onClick:f,id:e.name,type:"radio","data-testid":"test-sort-radio",value:e.name,className:"custom-radio",name:"sort-radio"}),(0,m.jsx)("label",{className:"sorting-label text-secondary",htmlFor:e.name,children:e.label})]},t)}))})},b=r(9499),x=function(){var e=(0,s.I0)(),t=(0,s.v9)((function(e){return e.brand})),r=(0,s.v9)((function(e){return e.allProducts}));return(0,n.useEffect)((function(){e((0,u.Nx)()),e((0,b.vp)()),e((0,d.$5)())}),[]),(0,o.Z)((function(){"fulfilled"===r.status&&e((0,u.NJ)())}),[r.status]),(0,o.Z)((function(){"fulfilled"===t.status&&"fulfilled"===r.status&&e((0,u.n0)({brands:t.value,selected:[],filteredProductsNum:r.value.length}))}),[t.status,r.status]),(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"filters",children:[(0,m.jsx)("span",{className:"filters-title",children:"Sorting"}),(0,m.jsx)("div",{className:"filter-container",children:(0,m.jsx)(v,{})}),(0,m.jsx)("span",{className:"filters-title",children:"Brands"}),(0,m.jsx)("div",{className:"filter-container",children:(0,m.jsx)(h,{})}),(0,m.jsx)("span",{className:"filters-title",children:"Tags"}),(0,m.jsx)("div",{className:"filter-container",children:(0,m.jsx)(g,{})})]})})}}}]);
//# sourceMappingURL=413.85637a72.chunk.js.map